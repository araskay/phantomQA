# phantomQA
This repository provides tools for multivariate analysis and visualization of fMRI phantom quality assurance (QA) data in R. Phantom QA data include summary measures of mean, std, SNR, scanner fluctuations, drift, RDC, ghosting, and FWHM generated by running the [fBIRN QA pipeline](https://www.nitrc.org/projects/bxh_xcede_tools/) and the [ACF pipeline](https://github.com/kayvanrad/acf). The results are visualized using interactive plotly dashboards.

# Getting started
This repository includes varios tools for reading the data from CSV files, doing correlation analysis, PCA, and multivariate outlier detection on the data, and producing interactive dashboards as well as static image plots. These tools are available through a number of modular libraries of functions. The following describe these libraries:
- *get_data.R* includes functions for reading fBIRN QA and ACF summary measures from CSV files, and combining the data into a singe data frame.
- *plotting.R* includes functions for creating interactive dashboards and static image plots including bar plots of summary measures and correlation and PCA plots.
- *multivar_outlier.R* includes functions for [MCD outlier detection](https://wis.kuleuven.be/stat/robust/papers/2010/wire-mcd.pdf) and outlier removal.
*run_acf_analysis_detrend_fit.R* is a sample script that calls various functions to read the data from CSV files, perform correlation analysis, PCA, and multivariate outlier detection on the data, and plot the data at each stage. The reader is invited to start with this file and work their way into the aforementioned libraries.

The following figures show just a few examples of the dashboards/plots generated using this repository:

Bar plots of ACF FWHM measures:
![detrend_fit_out_barplots_acf.png](https://github.com/kayvanrad/phantomQA/blob/master/images/detrend_fit_out_barplots_acf.png)

Correlation matrix of the fBIRN QA and ACF variables:
![detrend_fit_out_corr_plot.png](https://github.com/kayvanrad/phantomQA/blob/master/images/detrend_fit_out_corr_plot.png)

PCA with time courses - i.e., scan sessions within each site connected in temporal order of acquisition
![detrend_fit_out_fbirn_pca_timecourse.png](https://github.com/kayvanrad/phantomQA/blob/master/images/detrend_fit_out_fbirn_pca_timecourse.png)

## Installation
Clone or download this repository to a directory of your choice. Make sure all the prerequisites are installed.

## Author
[Aras Kayvanrad](https://www.linkedin.com/in/kayvanrad/)
